# GeoCrypt

**GeoCrypt** - CLI-застосунок для безпечного шифрування, дешифрування та керування ключами геопросторових даних (GeoJSON, KML, CSV) із використанням сучасних криптографічних алгоритмів (AES-GCM, X25519).

## Призначення

GeoCrypt розроблено для захисту геопросторової інформації у військових та критичних інфраструктурних системах. Система забезпечує:

- Конфіденційність та цілісність даних про місця, маршрути, об'єкти.
- Використання сучасних стандартів криптографії (AES-GCM, X25519).
- Контрольований обмін ключами без ризику компрометації.
- Зручний CLI-інтерфейс для інтеграції у скрипти та автоматизацію.

## Основні можливості

- Генерація ключової пари X25519 для асиметричного обміну ключами (`keygen`).
- Шифрування геопросторових файлів (GeoJSON, KML, CSV) із використанням AES-GCM та X25519 (`encrypt`).
- Дешифрування архівів із валідацією автентичності (`decrypt`).
- Перевірка та стандартизація геоданих перед шифруванням (CRS для GeoJSON, коректність координат для CSV).
- Зберігання результату у ZIP-контейнері разом із метаданими.
- Гнучка конфігурація через TOML-файл.
- Логування у консоль із підтримкою режиму DEBUG.

## Вимоги

- Python 3.12

### Необхідні бібліотеки

- pycryptodome
- geopandas
- pandas
- click
- (для KML/GeoJSON: встановлений GDAL та залежності geopandas)

## Встановлення

```bash
pip install pycryptodome geopandas pandas click
# За потреби: pip install toml
# Для Windows може знадобитися: conda install gdal
```

## Конфігурація

Створіть файл конфігурації у форматі TOML (наприклад, `config.toml`):

```toml
[keys]
private = "keys/my_private.pem"
public = "keys/my_public.pem"

[csv]
lat = "Latitude"
lon = "Longitude"
```

- `keys.private` - шлях до приватного ключа (PEM)
- `keys.public` - шлях до публічного ключа (PEM)
- `csv.lat` та `csv.lon` - назви колонок для широти й довготи у CSV (опційно)

## Приклади використання

1. **Генерація ключової пари**
    ```bash
    python cli_module.py keygen --config config.toml
    ```
2. **Шифрування файлу**
    ```bash
    python cli_module.py encrypt input.geojson --config config.toml --output secret_data.zip
    ```
3. **Дешифрування архіву**
    ```bash
    python cli_module.py decrypt secret_data.zip --config config.toml
    ```
4. **Додаткові опції**
    - `--debug` - розширене логування для діагностики

## Структура ZIP-архіву

- `encrypted_data.bin` - зашифрований контент (байти)
- `metadata.json` - метадані (ім’я оригінального файлу, ефемерний публічний ключ, nonce, tag у base64)

## Типові помилки та їх вирішення

- **Неправильний формат вхідного файлу:** перевірте, що розширення підтримується (CSV, KML, GeoJSON).
- **Помилка у валідації CSV:** переконайтеся, що файл містить колонки широти і довготи з відповідними назвами.
- **Криптографічні помилки:** перевірте правильність ключів у конфігурації, не редагуйте метадані вручну.
- **Помилки KML/GeoJSON:** переконайтеся у наявності залежностей GeoPandas та GDAL.

## Безпека

- Зберігайте ключі у безпечному місці.
- Передавайте публічний ключ лише уповноваженим особам.
- Не передавайте приватний ключ третім сторонам.

